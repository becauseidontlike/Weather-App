<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Mulish:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,200;1,300;1,400;1,500;1,600;1,700;1,800&family=Roboto:wght@100&display=swap"
        rel="stylesheet">
    <script src="https://kit.fontawesome.com/c6032110cb.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios@1.1.2/dist/axios.min.js"></script>
</head>
<title>Weather App</title>
<style>
    h1,
    h2 {
        font-family: 'Mulish', sans-serif;
    }

    h1 {
        font-size: 30px;
    }

    h2 {
        font-size: 45px;
    }

    ul {
        list-style: none;
    }

    body {
        background: linear-gradient(109.6deg, rgb(185, 212, 242) 11.2%, rgb(244, 210, 226) 100.3%);
        font-family: 'Mulish', sans-serif;
    }

    .container {
        display: block;
        margin: 0 auto;
        margin-top: 60px;
        margin-bottom: 40px;
        padding: 30px 20px 30px 20px;
        width: 750px;
        height: 600px;
        background-image: url("https://s3.amazonaws.com/shecodesio-production/uploads/files/000/060/751/original/billy-huynh-v9bnfMCyKbg-unsplash.jpg?1672414708");
        border-radius: 5px;
    }

    .searching-loc {
        width: 145px;
        position: relative;
        left: 90px;
        bottom: 39px;
    }

    .sunny {
        font-size: 55px;
        padding-left: 10px;
    }

    .other {
        font-size: 45px;
    }

    .current {
        text-transform: uppercase;
    }

    .center,
    .day,
    .temp,
    .sign {
        text-align: center;
    }

    .strong {
        font-weight: bolder;
        font-size: 15px;
    }

    .small,
    .sign {
        font-size: 12px;
    }

    .space {
        margin-bottom: 60px;
    }
</style>
</head>

<body>
    <div class="container">

        <div class="row align-items-start">
            <div class="col-3">
                <h1 class="myCity">Krakow</h1>
            </div>
            <div class="col-5">
                <form action="" id="form-search">
                    <input class="form-control" type="text" placeholder="City" aria-label="default input example"
                        id="write-in">
            </div>
            <div class="col-2"><button type="submit" class="btn btn-outline-light" id="searching-city">Search</button>

                <div class="col-4"><button type="submit" class="btn btn-outline-light searching-loc"
                        id="searching-loc">Current
                        location</button>
                </div>
            </div>
            </form>
        </div>

        <div class="row align-items-start">
            <div class="col">
                <div>
                    <div class="today">
                        THURSDAY</div>TIME: <span class="time"> 14:<span class="min">00</span></span><br /><span
                        class="current">CURRENT
                        WEATHER</span>
                    <br />
                </div>
            </div>
            <div class="col">
                <div class="addition">HUMIDITY: <span class="humid">60</span>% <br />WIND: <span class="speed">1</span>
                    km/h</div><br />
            </div>
        </div>


        <div class="row align-items-start">
            <div class="col-2">
                <i class="fa-solid fa-sun sunny"></i>
            </div>

            <div class="col-3">
                <h2><span class="actualTemp">17‚ÑÉ</span>
                </h2>
            </div>

            <br /><br /><br /><br /><br /><br /><br /><br /><br /><br />

            <ul>
                <div class="row align-items-start center">
                    <div class="col-2">
                        <li class="day">
                            Fri <br /><i class="fa-solid fa-sun other"></i><br />
                        <li class="temp">10‚ÑÉ</li>
                        </li>
                    </div>

                    <div class="col-2">
                        <li class="day">
                            Sat <br /><i class="fa-solid fa-cloud-sun other"></i><br />
                        <li class="temp">11‚ÑÉ</li>
                        </li>
                    </div>

                    <div class="col-2">
                        <li class="day">
                            Sun <br /><i class="fa-solid fa-cloud-sun-rain other"></i><br />
                        <li class="temp">10‚ÑÉ</li>
                        </li>
                    </div>

                    <div class="col-2">
                        <li class="day">
                            Mon <br /><i class="fa-solid fa-cloud-rain other"></i><br />
                        <li class="temp">12‚ÑÉ</li>
                    </div>

                    <div class="col-2">
                        <li class="day">
                            Tue <br /><i class="fa-solid fa-cloud-sun other"></i><br />
                        <li class="temp">10‚ÑÉ</li>
                        </li>
                    </div>

                    <div class="col-2">
                        <li class="day">
                            Wed <br /><i class="fa-solid fa-sun other"></i><br />
                        <li class="temp">13‚ÑÉ</li>
                        </li>
                    </div>
            </ul>
        </div>
    </div>

</body>
<footer class="sign">Coded with ‚òï&üç™ by WP</footer>
<div class="space"></div>

<script>

    function search(event) {
        event.preventDefault();
        let searchInput = document.querySelector("#write-in");
        let h1 = document.querySelector("h1");

        if (searchInput.value) {
            h1.innerHTML = `${searchInput.value}`
        }
    }

    let form = document.querySelector("#form-search");
    form.addEventListener("submit", search);

    function showT(response) {
        console.log(response);
        console.log(response.data);
        console.log(response.data.wind.speed);
        console.log(response.data.main.humidity);
        console.log(response.data.weather[0].description);
        let opis = response.data.weather[0].description;
        let wind = Math.round(response.data.wind.speed);
        let rainy = (response.data.main.humidity);
        let tempC = Math.round(response.data.main.temp);
        let description = document.querySelector(".current");
        let windy = document.querySelector(".speed");
        let rain = document.querySelector(".humid");
        let h2 = document.querySelector(".actualTemp");
        let current = document.querySelector("h1");
        description.innerHTML = `${opis}`;
        windy.innerHTML = `${wind}`;
        rain.innerHTML = `${rainy}`;
        h2.innerHTML = `${tempC}‚ÑÉ`;
        current.innerHTML = `${response.data.name}`;
    }

    function test(event) {
        event.preventDefault();
        let apiKey = "8fce6cea2c137d0262b10c9613860590";
        let city = document.querySelector(".myCity").innerHTML
        let apiUrl = `https://api.openweathermap.org/data/2.5/weather?q=${city}&units=metric&appid=8fce6cea2c137d0262b10c9613860590`;
        axios.get(apiUrl).then(showT);
    }

    form.addEventListener("submit", test);


    function showPosition(position) {
        let lat = `${position.coords.latitude}`;
        let lon = `${position.coords.longitude}`;
        console.log(position);
        let apiKey = "8fce6cea2c137d0262b10c9613860590";
        let apiUrl = `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=8fce6cea2c137d0262b10c9613860590&units=metric`;
        axios.get(apiUrl).then(showT);
    }

    function getCurrentPos() {
        navigator.geolocation.getCurrentPosition(showPosition);
    }

    let position = document.querySelector("#searching-loc");
    position.addEventListener("click", getCurrentPos)


    let timing = document.querySelector(".time");
    let now = new Date();
    let hours = now.getHours();
    let minutes = now.getMinutes();
    if (hours < 10) {
        hours = `0${hours}`;
    }
    if (minutes < 10) { minutes = `0${minutes}`; }
    timing.innerHTML = ` ${hours}:${minutes} `;

    let days = ["SUNDAY", "MONDAY", "TUESDAY", "WEDNESDAY", "THURSDAY", "FRIDAY", "SATUTDAY"];
    let day = days[now.getDay()];

    let today = document.querySelector(".today");
    today.innerHTML = `${day}`;

</script>

</body>

</html>